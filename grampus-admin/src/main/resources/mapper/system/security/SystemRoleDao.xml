<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vdegree.grampus.admin.modules.system.security.roles.dao.SystemRoleDao">

	<select id="getPermissions" resultType="java.lang.String">
		SELECT sm.`permission`
		FROM sys_user_role sur
		LEFT JOIN sys_role_menu srm
		    ON sur.`role_id` = srm.`role_id`
		LEFT JOIN sys_menu sm
		    ON srm.`menu_id` = sm.`id`
		WHERE sur.`user_id` = #{userId}
	</select>

	<select id="getAllPermissions" resultType="java.lang.String">
		SELECT sm.`permission`
		FROM sys_menu sm
		WHERE sm.`permission` IS NOT NULL
		  AND sm.`permission` != ''
	</select>
</mapper>